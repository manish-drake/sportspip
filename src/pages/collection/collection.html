<!--
  Generated template for the Collection page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary" no-border-bottom>
    <ion-title>Collection</ion-title>
    <ion-buttons end>
      <button ion-button icon-only><ion-icon name="funnel"></ion-icon></button>
    </ion-buttons>
  </ion-navbar>
  <ion-toolbar color="primary" no-border-top>
    <ion-searchbar (ionInput)="getSearchItems($event)"></ion-searchbar>
  </ion-toolbar>

</ion-header>


<ion-content style="background: #f1f1f1;position: relative;">
  <ion-refresher (ionRefresh)="doRefreshContent($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div class="items">
    <div class="item" *ngFor='let matrix of localMatrices; let i = index'>
      <ion-card (click)="openMatrix(matrix.Name,matrix.Channel)" (press)="matrixPressed(i,matrix.Name,matrix.Channel,matrix.Title)">
        <ion-row>
          <ion-col no-padding [style.background-image]="retrunThumbnailPath(matrix.ThumbnailSource)" style="height: 120px;background-size: cover;background-color:lightgray;background-position: center;">
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col no-padding>
            <ion-card-content style="padding:5px 10px 2px 10px ">
              <ion-row>
                <ion-col no-padding style="width: 100%;font-size: 18px;overflow: hidden;text-overflow: ellipsis;">
                  {{matrix.Title}}
                </ion-col>
                <ion-col no-padding center text-right style="flex: 0 0 auto; width: auto;">
                  <p>{{FormatDate(matrix.DateCreated)}}</p>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col no-padding style="width: 100%;overflow: hidden;text-overflow: ellipsis;">
                  {{matrix.Sport}}/{{matrix.Skill}}
                </ion-col>
                <ion-col no-padding center text-right style="flex: 0 0 auto; width: auto;">
                  <!--<p>{{formatDuration(matrix.Duration)}}</p>-->
                  <p>{{matrix.Views}}</p>
                </ion-col>
              </ion-row>
            </ion-card-content>
          </ion-col>
        </ion-row>
      </ion-card>
    </div>
  </div>
  <ion-row center *ngIf="!(localMatrices.length > 0) && !refreshing" style="position: absolute;top: 0;width: 100%;height: 100%; color: gray;">
    <ion-col text-center center>
      <b>No matrix exists</b>
    </ion-col>
  </ion-row>
</ion-content>