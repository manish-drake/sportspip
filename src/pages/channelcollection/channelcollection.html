<!--
  Generated template for the Channelcollection page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
	<ion-navbar color="primary" no-border-bottom>
		<ion-title>{{channel}}</ion-title>
		<ion-buttons end>
			<button ion-button icon-only (click)="presentPopover($event)"><ion-icon name="funnel"></ion-icon></button>
		</ion-buttons>
	</ion-navbar>
	<ion-toolbar color="primary" no-border-top>
		<ion-searchbar (ionInput)="getSearchItems($event)"></ion-searchbar>
	</ion-toolbar>
</ion-header>

<ion-content style="background:#f1f1f1; position: relative;">
	<div class="items">
		<div class="item" *ngFor="let matrix of channelMatrices; let i = index">
			<ion-card [command]="downloadMatrix" [usePress]="false" [cmdArgs]="downloadMatrixSource(i,matrix)" (press)="channelMatrixPressed(i,matrix)">
				<ion-row>
					<ion-col no-padding [style.background-image]="retrunThumbnailPath(matrix.UploadID)" 
					style="position: relative; height: 120px;background-size: cover;background-color:lightgray;background-position: center;">
						<ion-row center style="position: absolute;top: 0;font-size: 2.0em;width: 100%;height: 100%;font-weight: bold;background-color: rgba(0,0,0,0.2);">
							<ion-col center text-center>
								<button ion-button icon-left clear color="light" style="font-size: 20px; font-weight: bold;"><ion-icon name="download"></ion-icon>Download</button>
							</ion-col>
						</ion-row>
					</ion-col>
				</ion-row>
				<ion-row>
					<ion-col no-padding>
						<ion-card-content style="padding:5px 10px 2px 10px ">
							<ion-row>
								<ion-col no-padding style="width: 100%;font-size: 18px;overflow: hidden;text-overflow: ellipsis;">
									{{matrix.Title}}
								</ion-col>
								<ion-col no-padding center text-right style="flex: 0 0 auto; width: auto;">
									<p>{{FormatDate(matrix.DateCreated)}}</p>
								</ion-col>
							</ion-row>
							<ion-row>
								<ion-col no-padding style="width: 100%;overflow: hidden;text-overflow: ellipsis;">
									{{matrix.Sport}}/{{matrix.Skill}}
								</ion-col>
								<ion-col no-padding center text-right style="flex: 0 0 auto; width: auto;">
									<!--<p>{{formatDuration(matrix.Duration)}}</p>-->
									<p>{{matrix.Views}}</p>
								</ion-col>
							</ion-row>
						</ion-card-content>
					</ion-col>
				</ion-row>
			</ion-card>
		</div>
	</div>
	<ion-row center *ngIf="!(channelMatrices.length > 0) && !refreshing" style="position: absolute;top: 0;width: 100%;height: 100%; color: gray;">
		<ion-col text-center center>
			<b>No matrix exists in the channel</b>
		</ion-col>
	</ion-row>
</ion-content>