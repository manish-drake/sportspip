<!-- Calendar Add/Update/Delete event modal-->
<div class="modal-dialog sidebar-lg">
  <div class="modal-content p-0">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="toggleEventSidebar()">
      Ã—
    </button>
    <div class="modal-header mb-1">
      <h5 class="modal-title">{{ isDataEmpty === true ? 'Add' : 'Update' }} Event</h5>
    </div>
    <div class="modal-body flex-grow-1 pb-sm-0 pb-3">
      <form class="event-form needs-validation" (ngSubmit)="(eventForm.form.valid); eventForm.reset()"
        #eventForm="ngForm">
        <div class="form-group">
          <label for="select-label" class="form-label">Sport</label>
          <ng-select [items]="selectLabel" name="selectlabel" [(ngModel)]="event.schedule" bindLabel="sport"
            bindValue="sport" required [class.error]="eventForm.submitted && formLabelRef.invalid"
            #formLabelRef="ngModel">
            <ng-template ng-option-tmp ng-label-tmp let-item="item">
              <span class="bullet bullet-sm mr-50 bullet-{{ item.bullet }}"></span>
              {{ item.label }}
            </ng-template>
          </ng-select>
          <span *ngIf="eventForm.submitted && formLabelRef.invalid" class="invalid-form">
            <small class="form-text text-danger" *ngIf="formLabelRef.errors.required">Selection of sport is
              required!</small>
          </span>
        </div>
        <div class="form-group position-relative">
          <label for="start-date" class="form-label">Start Date/Time</label>
          <ng2-flatpickr [config]="startDateOptions" name="startDate" [setDate]="event.start" #startDatePicker required
            [class.error]="eventForm.submitted"></ng2-flatpickr>
        </div>

        <div class="form-group position-relative">
          <label for="end-date" class="form-label">End Date/Time</label>
          <ng2-flatpickr [config]="endDateOptions" name="endDate" [setDate]="event.end" #endDatePicker required
            [class.error]="eventForm.submitted"></ng2-flatpickr>
        </div>

        <div class="form-group">
          <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input home-switch" id="customSwitch3" [(ngModel)]="event.home"
              name="home" />
            <label class="custom-control-label" for="customSwitch3">Home</label>
          </div>
        </div>

        <div class="form-group select2-primary">
          <label for="event-guests" class="form-label">Teams</label>
          <!-- <ng-select [items]="selectGuest" name="selectGuest" [(ngModel)]="event.extendedProps.teams" bindLabel="name">
            <ng-template ng-option-tmp ng-label-tmp let-item="item">
              <div class="media align-items-center">
                <img class="d-block rounded-circle mr-50" [src]="item.avatar" height="26" width="26"
                  [alt]="item.name" />
                <div class="media-body">
                  <p class="mb-0">{{ item.name }}</p>
                </div>
              </div>
            </ng-template>

          </ng-select> -->

          <ng-multiselect-dropdown [placeholder]="'custom placeholder'" [settings]="dropdownSettings"
          [data]="dropdownList" [(ngModel)]="selectedItems">
        </ng-multiselect-dropdown>
        </div>

        <div class="form-group select2-primary">
          <label for="event-guests" class="form-label">Level</label>
          <ng-select [items]="selectGuest" name="selectGuest" [(ngModel)]="event.extendedProps.level" bindLabel="name">
            <ng-template ng-option-tmp ng-label-tmp let-item="item">
              <div class="media align-items-center">
                <img class="d-block rounded-circle mr-50" [src]="item.avatar" height="26" width="26"
                  [alt]="item.name" />
                <div class="media-body">
                  <p class="mb-0">{{ item.name }}</p>
                </div>
              </div>
            </ng-template>
          </ng-select>
        </div>

        <div class="form-group select2-primary">
          <label for="event-guests" class="form-label">Program</label>
          <ng-select [items]="selectGuest" name="selectGuest" [(ngModel)]="event.extendedProps.program"
            bindLabel="name">
            <ng-template ng-option-tmp ng-label-tmp let-item="item">
              <div class="media align-items-center">
                <img class="d-block rounded-circle mr-50" [src]="item.avatar" height="26" width="26"
                  [alt]="item.name" />
                <div class="media-body">
                  <p class="mb-0">{{ item.name }}</p>
                </div>
              </div>
            </ng-template>
          </ng-select>
        </div>

        <div class="form-group select2-primary">
          <label for="event-guests" class="form-label">Year</label>
          <ng-select [items]="selectGuest" name="selectGuest" [(ngModel)]="event.extendedProps.year" bindLabel="name">
            <ng-template ng-option-tmp ng-label-tmp let-item="item">
              <div class="media align-items-center">
                <img class="d-block rounded-circle mr-50" [src]="item.avatar" height="26" width="26"
                  [alt]="item.name" />
                <div class="media-body">
                  <p class="mb-0">{{ item.name }}</p>
                </div>
              </div>
            </ng-template>
          </ng-select>
        </div>

        <div class="form-group select2-primary">
          <label for="event-guests" class="form-label">Venue</label>
          <ng-select [items]="selectGuest" name="selectGuest" [(ngModel)]="event.extendedProps.venue" bindLabel="name">
            <ng-template ng-option-tmp ng-label-tmp let-item="item">
              <div class="media align-items-center">
                <img class="d-block rounded-circle mr-50" [src]="item.avatar" height="26" width="26"
                  [alt]="item.name" />
                <div class="media-body">
                  <p class="mb-0">{{ item.name }}</p>
                </div>
              </div>
            </ng-template>
          </ng-select>
        </div>


        <div class="form-group d-flex">
          <button type="submit" class="btn btn-primary add-event-btn mr-1"
            *ngIf="isDataEmpty !== false; else addEventRef" (click)="addEvent(eventForm)" rippleEffect>
            Add
          </button>
          <button type="button" class="btn btn-outline-secondary btn-cancel" data-dismiss="modal"
            (click)="toggleEventSidebar()" *ngIf="isDataEmpty !== false; else deleteEventRef" rippleEffect>
            Cancel
          </button>
          <ng-template #addEventRef>
            <button type="submit" class="btn btn-primary update-event-btn mr-1" (click)="updateEvent()" rippleEffect>
              Update
            </button>
          </ng-template>
          <ng-template #deleteEventRef>
            <button class="btn btn-outline-danger btn-delete-event" (click)="deleteEvent()" rippleEffect>Delete</button>
          </ng-template>
        </div>
      </form>
    </div>
  </div>
</div>
<!--/ Calendar Add/Update/Delete event modal-->