{"ast":null,"code":"// Hot Module Replacement\nfunction identity(val) {\n  return val;\n}\n\nexport function bootloader(main, before, after) {\n  if (typeof main === 'object') {\n    var _main = main.main;\n    before = main.before;\n    after = main.after;\n    main = _main;\n  }\n\n  before = before || identity;\n  after = after || identity;\n  var readyState = document.readyState;\n\n  function __domReadyHandler() {\n    document.removeEventListener('DOMContentLoaded', __domReadyHandler);\n    after(main(before(readyState)));\n  }\n\n  switch (readyState) {\n    case 'loading':\n      document.addEventListener('DOMContentLoaded', __domReadyHandler);\n      break;\n\n    case 'interactive':\n    case 'complete':\n    default:\n      after(main(before(readyState)));\n  }\n} // create new host elements and remove the old elements\n\nexport function createNewHosts(cmps) {\n  var components = Array.prototype.map.call(cmps, function (componentNode) {\n    var newNode = document.createElement(componentNode.tagName);\n    var parentNode = componentNode.parentNode;\n    var currentDisplay = newNode.style.display;\n    newNode.style.display = 'none';\n    parentNode.insertBefore(newNode, componentNode);\n\n    function removeOldHost() {\n      newNode.style.display = currentDisplay;\n\n      try {\n        parentNode.removeChild(componentNode);\n      } catch (e) {}\n    }\n\n    return removeOldHost;\n  });\n  return function removeOldHosts() {\n    components.forEach(function (removeOldHost) {\n      return removeOldHost();\n    });\n  };\n} // remove old styles\n\nexport function removeNgStyles() {\n  var docHead = document.head;\n\n  var _styles = docHead.querySelectorAll('style');\n\n  var styles = Array.prototype.slice.call(_styles);\n  styles.filter(function (style) {\n    return style.innerText.indexOf('_ng') !== -1;\n  }).map(function (el) {\n    return docHead.removeChild(el);\n  });\n} // get input values\n\nexport function getInputValues() {\n  var _inputs = document.querySelectorAll('input');\n\n  var inputs = Array.prototype.slice.call(_inputs);\n  return inputs.map(function (input) {\n    return input.value;\n  });\n} // set input values\n\nexport function setInputValues(_inputs) {\n  var inputs = document.querySelectorAll('input');\n\n  if (_inputs && inputs.length === _inputs.length) {\n    _inputs.forEach(function (value, i) {\n      var el = inputs[i];\n      el.value = value;\n      el.dispatchEvent(new CustomEvent('input', {\n        detail: el.value\n      }));\n    }); // clear array\n\n\n    _inputs.length = 0;\n  }\n} // get/set input values\n\nexport function createInputTransfer() {\n  var _inputs = getInputValues();\n\n  return function restoreInputValues() {\n    return setInputValues(_inputs);\n  };\n}","map":{"version":3,"sources":["../src/helpers.ts"],"names":[],"mappings":"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","sourcesContent":["// Hot Module Replacement\nfunction identity(val?: any) {\n  return val;\n}\n\nexport function bootloader(main: any, before?: any, after?: any): void {\n  if (typeof main === 'object') {\n    const _main = main.main;\n    before = main.before;\n    after = main.after;\n    main = _main;\n  }\n  before = before || identity;\n  after  = after  || identity;\n  const readyState = document.readyState;\n  function __domReadyHandler() {\n    document.removeEventListener('DOMContentLoaded', __domReadyHandler);\n    after(main(before(readyState)));\n  }\n  switch (readyState) {\n    case 'loading':\n      document.addEventListener('DOMContentLoaded', __domReadyHandler);\n      break;\n    case 'interactive':\n    case 'complete':\n    default:\n      after(main(before(readyState)));\n  }\n}\n\n// create new host elements and remove the old elements\nexport function createNewHosts(cmps: any) {\n  const components = Array.prototype.map.call(cmps, function(componentNode: any) {\n    const newNode = document.createElement(componentNode.tagName);\n    const parentNode = componentNode.parentNode;\n    const currentDisplay = newNode.style.display;\n\n    newNode.style.display = 'none';\n    parentNode.insertBefore(newNode, componentNode);\n\n    function removeOldHost() {\n      newNode.style.display = currentDisplay;\n      try {\n        parentNode.removeChild(componentNode);\n      } catch (e) {}\n    }\n\n    return removeOldHost;\n  });\n  return function removeOldHosts() {\n    components.forEach((removeOldHost: any) => removeOldHost());\n  };\n}\n\n// remove old styles\nexport function removeNgStyles() {\n    const docHead = document.head;\n    const _styles = docHead.querySelectorAll('style');\n    const styles = Array.prototype.slice.call(_styles);\n    styles\n      .filter((style: any) => style.innerText.indexOf('_ng') !== -1)\n      .map((el: any) => docHead.removeChild(el));\n}\n\n// get input values\nexport function getInputValues() {\n  const _inputs = document.querySelectorAll('input');\n  const inputs = Array.prototype.slice.call(_inputs);\n  return inputs.map((input: any) => input.value);\n}\n\n// set input values\nexport function setInputValues(_inputs: any) {\n  const inputs = document.querySelectorAll('input');\n  if (_inputs && inputs.length === _inputs.length) {\n    _inputs.forEach((value: any, i: number) => {\n      const el: any = inputs[i];\n      el.value = value;\n      el.dispatchEvent(new CustomEvent('input', {detail: el.value}));\n    });\n    // clear array\n    _inputs.length = 0;\n  }\n}\n\n// get/set input values\nexport function createInputTransfer() {\n  const _inputs = getInputValues();\n  return function restoreInputValues() {\n    return setInputValues(_inputs);\n  };\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}